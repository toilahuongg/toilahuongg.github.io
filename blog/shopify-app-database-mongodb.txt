2:I[9275,[],""]
3:I[1343,[],""]
4:I[231,["231","static/chunks/231-f5a29f791931326e.js","768","static/chunks/app/blog/layout-a90c7b1536f7eb16.js"],""]
0:["TGxWRb6e7ui63GHvPI7L9",[[["",{"children":["blog",{"children":["shopify-app-database-mongodb",{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":["shopify-app-database-mongodb",{"children":["__PAGE__",{},[["$L1",[["$","nav",null,{"className":"toc","children":["$","ol",null,{"className":"toc-level toc-level-1","children":[["$","li",null,{"className":"toc-item toc-item-h2","children":["$","a",null,{"className":"toc-link toc-link-h2","href":"#giới-thiệu","children":"Giới thiệu"}]}],["$","li",null,{"className":"toc-item toc-item-h2","children":[["$","a",null,{"className":"toc-link toc-link-h2","href":"#tại-sao-mongodb-cho-shopify-apps","children":"Tại sao MongoDB cho Shopify Apps?"}],["$","ol",null,{"className":"toc-level toc-level-2","children":["$","li",null,{"className":"toc-item toc-item-h3","children":["$","a",null,{"className":"toc-link toc-link-h3","href":"#ưu-điểm","children":"Ưu điểm"}]}]}]]}],["$","li",null,{"className":"toc-item toc-item-h2","children":[["$","a",null,{"className":"toc-link toc-link-h2","href":"#schema-design-principles","children":"Schema Design Principles"}],["$","ol",null,{"className":"toc-level toc-level-2","children":[["$","li",null,{"className":"toc-item toc-item-h3","children":["$","a",null,{"className":"toc-link toc-link-h3","href":"#1-per-shop-data-isolation","children":"1. Per-Shop Data Isolation"}]}],["$","li",null,{"className":"toc-item toc-item-h3","children":["$","a",null,{"className":"toc-link toc-link-h3","href":"#2-reference-vs-embedded","children":"2. Reference vs Embedded"}]}]]}]]}],["$","li",null,{"className":"toc-item toc-item-h2","children":[["$","a",null,{"className":"toc-link toc-link-h2","href":"#common-schemas","children":"Common Schemas"}],["$","ol",null,{"className":"toc-level toc-level-2","children":[["$","li",null,{"className":"toc-item toc-item-h3","children":["$","a",null,{"className":"toc-link toc-link-h3","href":"#1-config-schema","children":"1. Config Schema"}]}],["$","li",null,{"className":"toc-item toc-item-h3","children":["$","a",null,{"className":"toc-link toc-link-h3","href":"#2-store-schema","children":"2. Store Schema"}]}],["$","li",null,{"className":"toc-item toc-item-h3","children":["$","a",null,{"className":"toc-link toc-link-h3","href":"#3-analytics-schema","children":"3. Analytics Schema"}]}]]}]]}],["$","li",null,{"className":"toc-item toc-item-h2","children":[["$","a",null,{"className":"toc-link toc-link-h2","href":"#repository-pattern","children":"Repository Pattern"}],["$","ol",null,{"className":"toc-level toc-level-2","children":[["$","li",null,{"className":"toc-item toc-item-h3","children":["$","a",null,{"className":"toc-link toc-link-h3","href":"#implementation","children":"Implementation"}]}],["$","li",null,{"className":"toc-item toc-item-h3","children":["$","a",null,{"className":"toc-link toc-link-h3","href":"#store-repository","children":"Store Repository"}]}]]}]]}],["$","li",null,{"className":"toc-item toc-item-h2","children":[["$","a",null,{"className":"toc-link toc-link-h2","href":"#mongodb-connection-management","children":"MongoDB Connection Management"}],["$","ol",null,{"className":"toc-level toc-level-2","children":["$","li",null,{"className":"toc-item toc-item-h3","children":["$","a",null,{"className":"toc-link toc-link-h3","href":"#mongoose-connection","children":"Mongoose Connection"}]}]}]]}],["$","li",null,{"className":"toc-item toc-item-h2","children":[["$","a",null,{"className":"toc-link toc-link-h2","href":"#data-validation","children":"Data Validation"}],["$","ol",null,{"className":"toc-level toc-level-2","children":[["$","li",null,{"className":"toc-item toc-item-h3","children":["$","a",null,{"className":"toc-link toc-link-h3","href":"#mongoose-validation","children":"Mongoose Validation"}]}],["$","li",null,{"className":"toc-item toc-item-h3","children":["$","a",null,{"className":"toc-link toc-link-h3","href":"#zod-schema-validation","children":"Zod Schema Validation"}]}]]}]]}],["$","li",null,{"className":"toc-item toc-item-h2","children":["$","a",null,{"className":"toc-link toc-link-h2","href":"#usage-in-routes","children":"Usage in Routes"}]}],["$","li",null,{"className":"toc-item toc-item-h2","children":[["$","a",null,{"className":"toc-link toc-link-h2","href":"#best-practices","children":"Best Practices"}],["$","ol",null,{"className":"toc-level toc-level-2","children":[["$","li",null,{"className":"toc-item toc-item-h3","children":["$","a",null,{"className":"toc-link toc-link-h3","href":"#1-use-indexes-wisely","children":"1. Use Indexes Wisely"}]}],["$","li",null,{"className":"toc-item toc-item-h3","children":["$","a",null,{"className":"toc-link toc-link-h3","href":"#2-ttl-for-temporary-data","children":"2. TTL for Temporary Data"}]}],["$","li",null,{"className":"toc-item toc-item-h3","children":["$","a",null,{"className":"toc-link toc-link-h3","href":"#3-connection-pooling","children":"3. Connection Pooling"}]}],["$","li",null,{"className":"toc-item toc-item-h3","children":["$","a",null,{"className":"toc-link toc-link-h3","href":"#4-error-handling","children":"4. Error Handling"}]}]]}]]}],["$","li",null,{"className":"toc-item toc-item-h2","children":["$","a",null,{"className":"toc-link toc-link-h2","href":"#key-takeaways","children":"Key Takeaways"}]}],["$","li",null,{"className":"toc-item toc-item-h2","children":["$","a",null,{"className":"toc-link toc-link-h2","href":"#next-steps","children":"Next Steps"}]}]]}]}],"\n",["$","h1",null,{"id":"database-design-với-mongodb-cho-shopify-app","children":"Database Design với MongoDB cho Shopify App"}],"\n",["$","h2",null,{"id":"giới-thiệu","children":"Giới thiệu"}],"\n",["$","p",null,{"children":"Database là nơi lưu trữ configuration và data của app. Bài viết này sẽ hướng dẫn thiết kế schema hiệu quả cho Shopify App sử dụng MongoDB."}],"\n",["$","hr",null,{}],"\n",["$","h2",null,{"id":"tại-sao-mongodb-cho-shopify-apps","children":"Tại sao MongoDB cho Shopify Apps?"}],"\n",["$","h3",null,{"id":"ưu-điểm","children":"Ưu điểm"}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"1. Flexible Schema"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"Dễ dàng thêm fields mới"}],"\n",["$","li",null,{"children":"Khác nhau giữa các shops"}],"\n",["$","li",null,{"children":"Phù hợp cho SaaS apps"}],"\n"]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"2. Scalability"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"Horizontal scaling"}],"\n",["$","li",null,{"children":"Sharding support"}],"\n",["$","li",null,{"children":"Cloud options (MongoDB Atlas)"}],"\n"]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"3. Document Structure"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"Nested objects"}],"\n",["$","li",null,{"children":"Arrays support"}],"\n",["$","li",null,{"children":"JSON-like documents"}],"\n"]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"4. Developer Friendly"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"JavaScript/TypeScript native"}],"\n",["$","li",null,{"children":"Mongoose ODM"}],"\n",["$","li",null,{"children":"Easy prototyping"}],"\n"]}],"\n",["$","hr",null,{}],"\n",["$","h2",null,{"id":"schema-design-principles","children":"Schema Design Principles"}],"\n",["$","h3",null,{"id":"1-per-shop-data-isolation","children":"1. Per-Shop Data Isolation"}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"❌ BAD: Một collection cho tất cả data"}]}],"\n",["$","figure",null,{"className":"$undefined","data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1F2028","color":"#c8d3f5"},"tabIndex":"0","data-language":"typescript","data-theme":"moonlight-ii","children":["$","code",null,{"data-language":"typescript","data-theme":"moonlight-ii","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"// Không nên - data lẫn lộn"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"{"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"  shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"shop1.myshopify.com"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"  type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"config"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"  data"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#FF757F","fontWeight":"bold"},"children":"..."}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]}]]}]}]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"✅ GOOD: Shop-specific models"}]}],"\n",["$","figure",null,{"className":"$undefined","data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1F2028","color":"#c8d3f5"},"tabIndex":"0","data-language":"typescript","data-theme":"moonlight-ii","children":["$","code",null,{"data-language":"typescript","data-theme":"moonlight-ii","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"// Nên - mỗi model cho một shop"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"{"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"  _id"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#65BCFF"},"children":" ObjectId"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"..."}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"  shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"shop1.myshopify.com"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#858AA6"},"children":"  // Unique index"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"  settings"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#FF757F","fontWeight":"bold"},"children":"..."}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]}]]}]}]}],"\n",["$","h3",null,{"id":"2-reference-vs-embedded","children":"2. Reference vs Embedded"}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"Embedded (thường tốt hơn):"}]}],"\n",["$","figure",null,{"className":"$undefined","data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1F2028","color":"#c8d3f5"},"tabIndex":"0","data-language":"typescript","data-theme":"moonlight-ii","children":["$","code",null,{"data-language":"typescript","data-theme":"moonlight-ii","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"// Product settings embedded trong config"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"{"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"  shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"shop1.myshopify.com"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"  productSettings"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"    showPrice"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"    showVariant"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"    currency"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"USD"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]}]]}]}]}],"\n",["$","p",null,{"children":["$","strong",null,{"children":"Reference (khi data quá lớn):"}]}],"\n",["$","figure",null,{"className":"$undefined","data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1F2028","color":"#c8d3f5"},"tabIndex":"0","data-language":"typescript","data-theme":"moonlight-ii","children":["$","code",null,{"data-language":"typescript","data-theme":"moonlight-ii","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"// Reference sang analytics events"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"{"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"  shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"shop1.myshopify.com"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"  eventIds"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ["}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"ObjectId"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"..."}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#65BCFF"},"children":" ObjectId"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"..."}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"]"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]}]]}]}]}],"\n",["$","hr",null,{}],"\n",["$","h2",null,{"id":"common-schemas","children":"Common Schemas"}],"\n",["$","h3",null,{"id":"1-config-schema","children":"1. Config Schema"}],"\n",["$","p",null,{"children":"Lưu trữ app configuration cho mỗi shop."}],"\n",["$","figure",null,{"className":"$undefined","data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1F2028","color":"#c8d3f5"},"tabIndex":"0","data-language":"typescript","data-theme":"moonlight-ii","children":["$","code",null,{"data-language":"typescript","data-theme":"moonlight-ii","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"// app/models/config.model.ts"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"import"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" mongoose"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" { "}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"Schema"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" from"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"mongoose"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C099FF"},"children":"interface"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" IConfig"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  settings"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    enabled"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" boolean"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    buttonColor"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    buttonTextColor"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    position"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"top"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" |"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"bottom"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    borderRadius"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    padding"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    fontSize"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  themeExtension"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    enabled"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" boolean"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    themeId"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"?:"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  createdAt"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Date"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  updatedAt"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Date"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C099FF"},"children":"const"}],["$","span",null,{"style":{"color":"#FF98A4"},"children":" configSchema"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" new"}],["$","span",null,{"style":{"color":"#65BCFF"},"children":" Schema"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"<"}],["$","span",null,{"style":{"color":"#FFC777"},"children":"IConfig"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":">"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" String"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    required"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    unique"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    index"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  settings"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    enabled"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" Boolean"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" default"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" false"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    buttonColor"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" String"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" default"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"#000000"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    buttonTextColor"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" String"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" default"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"#FFFFFF"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    position"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" String"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" enum"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ["}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"top"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"bottom"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"],"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" default"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"bottom"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    borderRadius"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" String"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" default"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"4px"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    padding"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" String"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" default"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"12px 24px"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    fontSize"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" String"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" default"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"16px"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  themeExtension"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    enabled"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" Boolean"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" default"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" false"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    themeId"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" String"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  createdAt"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" Date"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" default"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Date"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#A9B8E8"},"children":"now "}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  updatedAt"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" Date"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" default"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Date"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#A9B8E8"},"children":"now "}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  timestamps"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}],["$","span",null,{"style":{"color":"#858AA6"},"children":"  // Auto-manage createdAt, updatedAt"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"})"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"// Indexes"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"configSchema"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"index"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" 1"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" })"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"configSchema"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"index"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"settings.enabled"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" 1"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" })"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"configSchema"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"index"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"themeExtension.enabled"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" 1"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" })"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"export"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" const"}],["$","span",null,{"style":{"color":"#FF98A4"},"children":" Config"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#FFC777"},"children":" mongoose"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"model"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"<"}],["$","span",null,{"style":{"color":"#FFC777"},"children":"IConfig"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":">"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"Config"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" configSchema"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}]]}]}]}],"\n",["$","h3",null,{"id":"2-store-schema","children":"2. Store Schema"}],"\n",["$","p",null,{"children":"Lưu trữ thông tin về shop và onboarding status."}],"\n",["$","figure",null,{"className":"$undefined","data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1F2028","color":"#c8d3f5"},"tabIndex":"0","data-language":"typescript","data-theme":"moonlight-ii","children":["$","code",null,{"data-language":"typescript","data-theme":"moonlight-ii","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"// app/models/store.model.ts"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"import"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" mongoose"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" { "}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"Schema"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" from"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"mongoose"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C099FF"},"children":"interface"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" IStore"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  shopName"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  contactEmail"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  primaryDomain"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  shopPlan"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  themeId"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"  // Onboarding"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  onboardingCompleted"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" boolean"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  onboardingStep"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" number"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"  // App status"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  installedAt"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Date"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  uninstalledAt"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"?:"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Date"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  isActive"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" boolean"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"  // Review tracking"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  hasReviewed"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" boolean"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  reviewTouchpoints"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    setupCompletedShown"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" boolean"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    milestoneReachedShown"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" boolean"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  createdAt"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Date"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  updatedAt"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Date"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C099FF"},"children":"const"}],["$","span",null,{"style":{"color":"#FF98A4"},"children":" storeSchema"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" new"}],["$","span",null,{"style":{"color":"#65BCFF"},"children":" Schema"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"<"}],["$","span",null,{"style":{"color":"#FFC777"},"children":"IStore"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":">"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" String"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    required"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    unique"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    index"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  shopName"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" String"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  contactEmail"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" String"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  primaryDomain"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" String"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  shopPlan"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" String"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  themeId"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" String"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  onboardingCompleted"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" Boolean"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" default"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" false"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  onboardingStep"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" Number"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" default"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" 0"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  installedAt"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" Date"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" default"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Date"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#A9B8E8"},"children":"now "}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  uninstalledAt"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" Date"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  isActive"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" Boolean"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" default"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  hasReviewed"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" Boolean"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" default"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" false"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  reviewTouchpoints"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    setupCompletedShown"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" Boolean"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" default"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" false"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    milestoneReachedShown"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" Boolean"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" default"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" false"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  createdAt"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" Date"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" default"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Date"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#A9B8E8"},"children":"now "}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  updatedAt"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" Date"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" default"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Date"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#A9B8E8"},"children":"now "}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  timestamps"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"})"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"export"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" const"}],["$","span",null,{"style":{"color":"#FF98A4"},"children":" Store"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#FFC777"},"children":" mongoose"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"model"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"<"}],["$","span",null,{"style":{"color":"#FFC777"},"children":"IStore"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":">"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"Store"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" storeSchema"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}]]}]}]}],"\n",["$","h3",null,{"id":"3-analytics-schema","children":"3. Analytics Schema"}],"\n",["$","p",null,{"children":"Lưu trữ analytics events với TTL để tự động cleanup."}],"\n",["$","figure",null,{"className":"$undefined","data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1F2028","color":"#c8d3f5"},"tabIndex":"0","data-language":"typescript","data-theme":"moonlight-ii","children":["$","code",null,{"data-language":"typescript","data-theme":"moonlight-ii","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"// app/models/analytics.model.ts"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"import"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" mongoose"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" { "}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"Schema"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" from"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"mongoose"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C099FF"},"children":"interface"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" IAnalyticsEvent"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  eventType"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"impression"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" |"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"click"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" |"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"add_to_cart"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" |"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"order"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  deviceType"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"desktop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" |"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"mobile"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  sessionId"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"  // Event data"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  productId"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"?:"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  variantId"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"?:"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  value"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"?:"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" number"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"  // Timestamp"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  timestamp"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Date"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"  // TTL index - auto delete sau 90 days"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  createdAt"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Date"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C099FF"},"children":"const"}],["$","span",null,{"style":{"color":"#FF98A4"},"children":" analyticsSchema"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" new"}],["$","span",null,{"style":{"color":"#65BCFF"},"children":" Schema"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"<"}],["$","span",null,{"style":{"color":"#FFC777"},"children":"IAnalyticsEvent"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":">"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" String"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    required"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    index"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  eventType"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" String"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    enum"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ["}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"impression"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"click"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"add_to_cart"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"order"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"],"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    required"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    index"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  deviceType"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" String"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    enum"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ["}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"desktop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"mobile"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"],"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    required"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  sessionId"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" String"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" index"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  productId"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" String"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  variantId"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" String"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  value"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" Number"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  timestamp"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" Date"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" default"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Date"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#A9B8E8"},"children":"now"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" index"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  createdAt"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" Date"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" default"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Date"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#A9B8E8"},"children":"now"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" expires"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" 7776000"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#858AA6"},"children":" // 90 days TTL"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  timestamps"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" false"}],["$","span",null,{"style":{"color":"#858AA6"},"children":"  // Don't auto-update timestamps"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"})"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"// Compound indexes cho query performance"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"analyticsSchema"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"index"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" 1"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" timestamp"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" -"}],["$","span",null,{"style":{"color":"#FF966C"},"children":"1"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" })"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"analyticsSchema"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"index"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" eventType"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" 1"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" timestamp"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" -"}],["$","span",null,{"style":{"color":"#FF966C"},"children":"1"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" })"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"analyticsSchema"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"index"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" sessionId"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" 1"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" timestamp"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" 1"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" })"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"export"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" const"}],["$","span",null,{"style":{"color":"#FF98A4"},"children":" AnalyticsEvent"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#FFC777"},"children":" mongoose"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"model"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"<"}],["$","span",null,{"style":{"color":"#FFC777"},"children":"IAnalyticsEvent"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":">"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"  \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"AnalyticsEvent"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C8D3F5"},"children":"  analyticsSchema"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}]]}]}]}],"\n",["$","hr",null,{}],"\n",["$","h2",null,{"id":"repository-pattern","children":"Repository Pattern"}],"\n",["$","p",null,{"children":"Repository Pattern tách biệt data access logic khỏi business logic."}],"\n",["$","h3",null,{"id":"implementation","children":"Implementation"}],"\n",["$","figure",null,{"className":"$undefined","data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1F2028","color":"#c8d3f5"},"tabIndex":"0","data-language":"typescript","data-theme":"moonlight-ii","children":["$","code",null,{"data-language":"typescript","data-theme":"moonlight-ii","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"// app/repositories/config.repository.ts"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"import"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" { "}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"Config"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" from"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"../models/config.model"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"export"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" async"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" function"}],["$","span",null,{"style":{"color":"#82AAFF"},"children":" findByShop"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#FCA7EA"},"children":"shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"  return"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" await"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Config"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"findOne"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({ "}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"shop"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" })"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"export"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" async"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" function"}],["$","span",null,{"style":{"color":"#82AAFF"},"children":" findOrCreate"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#FCA7EA"},"children":"shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C099FF"},"children":"  let"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" config"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" await"}],["$","span",null,{"style":{"color":"#65BCFF"},"children":" findByShop"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"shop"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"  if"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" ("}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"!"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"config"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C8D3F5"},"children":"    config"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" await"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Config"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"create"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({ "}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"shop"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" })"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"  return"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" config"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"export"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" async"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" function"}],["$","span",null,{"style":{"color":"#82AAFF"},"children":" update"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FCA7EA"},"children":"  shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FCA7EA"},"children":"  data"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Partial"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"<"}],["$","span",null,{"style":{"color":"#FFC777"},"children":"IConfig"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":">"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"  return"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" await"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Config"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"findOneAndUpdate"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"    { "}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"shop"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"    { "}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":"$$set"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#FF757F","fontWeight":"bold"},"children":" ..."}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"data"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" updatedAt"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" new"}],["$","span",null,{"style":{"color":"#65BCFF"},"children":" Date"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"()"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"    { "}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":"upsert"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" new"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  )"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"export"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" async"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" function"}],["$","span",null,{"style":{"color":"#82AAFF"},"children":" updateSettings"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FCA7EA"},"children":"  shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FCA7EA"},"children":"  settings"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" IConfig"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"["}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"settings"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"]"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"  return"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" await"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Config"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"findOneAndUpdate"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"    { "}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"shop"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"    { "}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":"$$set"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" settings"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" updatedAt"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" new"}],["$","span",null,{"style":{"color":"#65BCFF"},"children":" Date"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"()"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"    { "}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":"new"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  )"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"export"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" async"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" function"}],["$","span",null,{"style":{"color":"#82AAFF"},"children":" deleteByShop"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#FCA7EA"},"children":"shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"  return"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" await"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Config"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"deleteOne"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({ "}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"shop"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" })"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"export"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" async"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" function"}],["$","span",null,{"style":{"color":"#82AAFF"},"children":" findAllActive"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"()"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"  return"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" await"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Config"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"find"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"    \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"settings.enabled"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"    \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"themeExtension.enabled"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  })"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]}]]}]}]}],"\n",["$","h3",null,{"id":"store-repository","children":"Store Repository"}],"\n",["$","figure",null,{"className":"$undefined","data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1F2028","color":"#c8d3f5"},"tabIndex":"0","data-language":"typescript","data-theme":"moonlight-ii","children":["$","code",null,{"data-language":"typescript","data-theme":"moonlight-ii","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"// app/repositories/store.repository.ts"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"import"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" { "}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"Store"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" from"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"../models/store.model"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"export"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" async"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" function"}],["$","span",null,{"style":{"color":"#82AAFF"},"children":" findByShop"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#FCA7EA"},"children":"shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"  return"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" await"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Store"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"findOne"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({ "}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"shop"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" })"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"export"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" async"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" function"}],["$","span",null,{"style":{"color":"#82AAFF"},"children":" findOrCreate"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#FCA7EA"},"children":"shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C099FF"},"children":"  let"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" store"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" await"}],["$","span",null,{"style":{"color":"#65BCFF"},"children":" findByShop"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"shop"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"  if"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" ("}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"!"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"store"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C8D3F5"},"children":"    store"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" await"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Store"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"create"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({ "}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"shop"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" })"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"  return"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" store"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"export"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" async"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" function"}],["$","span",null,{"style":{"color":"#82AAFF"},"children":" markInstalled"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#FCA7EA"},"children":"shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#FCA7EA"},"children":" data"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  shopName"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  contactEmail"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  primaryDomain"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  themeId"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  shopPlan"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"})"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"  return"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" await"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Store"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"findOneAndUpdate"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"    { "}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"shop"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"    {"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"      $set"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FF757F","fontWeight":"bold"},"children":"        ..."}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"data"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"        installedAt"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" new"}],["$","span",null,{"style":{"color":"#65BCFF"},"children":" Date"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"()"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"        isActive"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"        uninstalledAt"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#7F85A3"},"children":" null"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"      }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"    }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"    { "}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":"upsert"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" new"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  )"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"export"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" async"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" function"}],["$","span",null,{"style":{"color":"#82AAFF"},"children":" markUninstalled"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#FCA7EA"},"children":"shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"  return"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" await"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Store"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"findOneAndUpdate"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"    { "}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"shop"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"    {"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"      $set"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"        isActive"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" false"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"        uninstalledAt"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" new"}],["$","span",null,{"style":{"color":"#65BCFF"},"children":" Date"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"()"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"      }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"    }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"    { "}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":"new"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  )"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"export"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" async"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" function"}],["$","span",null,{"style":{"color":"#82AAFF"},"children":" updateOnboarding"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FCA7EA"},"children":"  shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FCA7EA"},"children":"  step"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" number"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FCA7EA"},"children":"  completed"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" boolean"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"  return"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" await"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Store"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"findOneAndUpdate"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"    { "}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"shop"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"    {"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"      $set"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"        onboardingStep"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" step"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"        onboardingCompleted"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" completed"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"      }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"    }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"    { "}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":"new"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  )"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"export"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" async"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" function"}],["$","span",null,{"style":{"color":"#82AAFF"},"children":" getAllActive"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"()"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"  return"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" await"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" Store"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"find"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    isActive"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    onboardingCompleted"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  })"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]}]]}]}]}],"\n",["$","hr",null,{}],"\n",["$","h2",null,{"id":"mongodb-connection-management","children":"MongoDB Connection Management"}],"\n",["$","h3",null,{"id":"mongoose-connection","children":"Mongoose Connection"}],"\n",["$","figure",null,{"className":"$undefined","data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1F2028","color":"#c8d3f5"},"tabIndex":"0","data-language":"typescript","data-theme":"moonlight-ii","children":["$","code",null,{"data-language":"typescript","data-theme":"moonlight-ii","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"// app/mongoose.server.ts"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"import"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" mongoose "}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"from"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"mongoose"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C099FF"},"children":"const"}],["$","span",null,{"style":{"color":"#FF98A4"},"children":" MONGODB_URI"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#FFC777"},"children":" process"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#A9B8E8"},"children":"env"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#FF98A4"},"children":"MONGODB_URI"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"!;"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"if"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" ("}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"!"}],["$","span",null,{"style":{"color":"#FF98A4"},"children":"MONGODB_URI"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"  throw"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" new"}],["$","span",null,{"style":{"color":"#65BCFF"},"children":" Error"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"MONGODB_URI is not defined"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"// Connection caching"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C099FF"},"children":"let"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" cached "}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"="}],["$","span",null,{"style":{"color":"#FFC777"},"children":" global"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#A9B8E8"},"children":"mongoose"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"if"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" ("}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"!"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"cached"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C8D3F5"},"children":"  cached"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#FFC777"},"children":" global"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#A9B8E8"},"children":"mongoose"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" { "}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":"conn"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#7F85A3"},"children":" null"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" promise"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#7F85A3"},"children":" null"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"export"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" async"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" function"}],["$","span",null,{"style":{"color":"#82AAFF"},"children":" connectToMongoDB"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"()"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"  if"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" ("}],["$","span",null,{"style":{"color":"#FFC777"},"children":"cached"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#A9B8E8"},"children":"conn"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"    return"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" cached"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#A9B8E8"},"children":"conn"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"  if"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" ("}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"!"}],["$","span",null,{"style":{"color":"#FFC777"},"children":"cached"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#A9B8E8"},"children":"promise"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C099FF"},"children":"    const"}],["$","span",null,{"style":{"color":"#FF98A4"},"children":" opts"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"      bufferCommands"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" false"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"    }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"    cached"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#A9B8E8"},"children":"promise"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#FFC777"},"children":" mongoose"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"connect"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#FF98A4"},"children":"MONGODB_URI"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" opts"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"then"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"(("}],["$","span",null,{"style":{"color":"#FCA7EA"},"children":"mongoose"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":") "}],["$","span",null,{"style":{"color":"#C099FF"},"children":"=>"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"      return"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" mongoose"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"    })"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"  try"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"    cached"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#A9B8E8"},"children":"conn"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" await"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" cached"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#A9B8E8"},"children":"promise"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  } "}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"catch"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" ("}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"e"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"    cached"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#A9B8E8"},"children":"promise"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#7F85A3"},"children":" null"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"    throw"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" e"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"  return"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" cached"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#A9B8E8"},"children":"conn"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"// Event listeners"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"mongoose"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#A9B8E8"},"children":"connection"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"on"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"connected"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" ()"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" =>"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"  console"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"log"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"MongoDB connected successfully"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"})"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"mongoose"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#A9B8E8"},"children":"connection"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"on"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"error"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" ("}],["$","span",null,{"style":{"color":"#FCA7EA"},"children":"err"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" =>"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"  console"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"error"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"MongoDB connection error:"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" err"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"})"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"mongoose"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#A9B8E8"},"children":"connection"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"on"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"disconnected"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" ()"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" =>"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"  console"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"log"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"MongoDB disconnected"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"})"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}]]}]}]}],"\n",["$","hr",null,{}],"\n",["$","h2",null,{"id":"data-validation","children":"Data Validation"}],"\n",["$","h3",null,{"id":"mongoose-validation","children":"Mongoose Validation"}],"\n",["$","figure",null,{"className":"$undefined","data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1F2028","color":"#c8d3f5"},"tabIndex":"0","data-language":"typescript","data-theme":"moonlight-ii","children":["$","code",null,{"data-language":"typescript","data-theme":"moonlight-ii","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C099FF"},"children":"const"}],["$","span",null,{"style":{"color":"#FF98A4"},"children":" configSchema"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" new"}],["$","span",null,{"style":{"color":"#65BCFF"},"children":" Schema"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  buttonColor"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" String"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    validate"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#82AAFF"},"children":"      validator"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" function"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#FCA7EA"},"children":"v"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" string"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"        return"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" /"}],["$","span",null,{"style":{"color":"#C099FF"},"children":"^"}],["$","span",null,{"style":{"color":"#B4F9F8"},"children":"#"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"["}],["$","span",null,{"style":{"color":"#FFC777"},"children":"0-9A-F"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"]"}],["$","span",null,{"style":{"color":"#FCA7EA"},"children":"{6}"}],["$","span",null,{"style":{"color":"#C099FF"},"children":"$$"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"/"}],["$","span",null,{"style":{"color":"#C099FF"},"children":"i"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"test"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"v"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"      }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#82AAFF"},"children":"      message"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" ("}],["$","span",null,{"style":{"color":"#FCA7EA"},"children":"props"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" =>"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" `${"}],["$","span",null,{"style":{"color":"#FFC777"},"children":"props"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#A9B8E8"},"children":"value"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"}"}],["$","span",null,{"style":{"color":"#C3E88D"},"children":" is not a valid hex color!"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"`"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"    }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  position"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" String"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    enum"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"      values"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ["}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"top"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"bottom"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"],"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"      message"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"{VALUE} is not supported"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"    }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"})"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}]]}]}]}],"\n",["$","h3",null,{"id":"zod-schema-validation","children":"Zod Schema Validation"}],"\n",["$","figure",null,{"className":"$undefined","data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1F2028","color":"#c8d3f5"},"tabIndex":"0","data-language":"typescript","data-theme":"moonlight-ii","children":["$","code",null,{"data-language":"typescript","data-theme":"moonlight-ii","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"// app/validators/config.validator.ts"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"import"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" { "}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"z"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" from"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"zod"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"export"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" const"}],["$","span",null,{"style":{"color":"#FF98A4"},"children":" configSchema"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#FFC777"},"children":" z"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"object"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  buttonColor"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" z"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"string"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"()"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"regex"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"/"}],["$","span",null,{"style":{"color":"#C099FF"},"children":"^"}],["$","span",null,{"style":{"color":"#B4F9F8"},"children":"#"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"["}],["$","span",null,{"style":{"color":"#FFC777"},"children":"0-9A-F"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"]"}],["$","span",null,{"style":{"color":"#FCA7EA"},"children":"{6}"}],["$","span",null,{"style":{"color":"#C099FF"},"children":"$$"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"/"}],["$","span",null,{"style":{"color":"#C099FF"},"children":"i"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"Invalid color format"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  position"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" z"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"enum"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"["}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"top"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"bottom"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"],"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#82AAFF"},"children":"    errorMap"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" ()"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" =>"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" ({"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" message"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"Position must be 'top' or 'bottom'"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" })"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  })"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  enabled"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" z"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"boolean"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"()"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"default"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#FF966C"},"children":"false"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  borderRadius"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" z"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"string"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"()"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"optional"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"()"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  padding"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" z"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"string"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"()"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"optional"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"()"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  fontSize"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" z"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"string"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"()"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"optional"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"()"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"})"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"export"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" type"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" ConfigInput"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#FFC777"},"children":" z"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#FFC777"},"children":"infer"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"<typeof"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" configSchema"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":">;"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"export"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" function"}],["$","span",null,{"style":{"color":"#82AAFF"},"children":" validateConfig"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#FCA7EA"},"children":"data"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" unknown"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"  return"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" configSchema"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"parse"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"data"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]}]]}]}]}],"\n",["$","hr",null,{}],"\n",["$","h2",null,{"id":"usage-in-routes","children":"Usage in Routes"}],"\n",["$","figure",null,{"className":"$undefined","data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1F2028","color":"#c8d3f5"},"tabIndex":"0","data-language":"tsx","data-theme":"moonlight-ii","children":["$","code",null,{"data-language":"tsx","data-theme":"moonlight-ii","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"// app/routes/app.customizer.tsx"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"export"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" const"}],["$","span",null,{"style":{"color":"#82AAFF"},"children":" loader"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#C099FF"},"children":" async"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" ("}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"{"}],["$","span",null,{"style":{"color":"#FCA7EA"},"children":" request"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" }:"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" LoaderFunctionArgs"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" =>"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C099FF"},"children":"  const"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" {"}],["$","span",null,{"style":{"color":"#FF98A4"},"children":" session"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" await"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" authenticate"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"admin"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"request"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C099FF"},"children":"  const"}],["$","span",null,{"style":{"color":"#FF98A4"},"children":" shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#FFC777"},"children":" session"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#A9B8E8"},"children":"shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"  // Repository pattern"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C099FF"},"children":"  const"}],["$","span",null,{"style":{"color":"#FF98A4"},"children":" config"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" await"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" configRepository"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"findByShop"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"shop"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"  return"}],["$","span",null,{"style":{"color":"#65BCFF"},"children":" json"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({ "}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"config"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" })"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"export"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" const"}],["$","span",null,{"style":{"color":"#82AAFF"},"children":" action"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#C099FF"},"children":" async"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" ("}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"{"}],["$","span",null,{"style":{"color":"#FCA7EA"},"children":" request"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" }:"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" ActionFunctionArgs"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#C099FF"},"children":" =>"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C099FF"},"children":"  const"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" {"}],["$","span",null,{"style":{"color":"#FF98A4"},"children":" session"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" }"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" await"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" authenticate"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"admin"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"request"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C099FF"},"children":"  const"}],["$","span",null,{"style":{"color":"#FF98A4"},"children":" shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#FFC777"},"children":" session"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#A9B8E8"},"children":"shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C099FF"},"children":"  const"}],["$","span",null,{"style":{"color":"#FF98A4"},"children":" formData"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" await"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" request"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"formData"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"()"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"  // Validate"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C099FF"},"children":"  const"}],["$","span",null,{"style":{"color":"#FF98A4"},"children":" settings"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#65BCFF"},"children":" validateConfig"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    buttonColor"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" formData"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"get"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"buttonColor"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    position"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" formData"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"get"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"position"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"    enabled"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" formData"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"get"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"enabled"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ==="}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" \""}],["$","span",null,{"style":{"color":"#C3E88D"},"children":"true"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"\""}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  })"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"  // Save"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C099FF"},"children":"  const"}],["$","span",null,{"style":{"color":"#FF98A4"},"children":" config"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" await"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" configRepository"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"updateSettings"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" settings"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"  return"}],["$","span",null,{"style":{"color":"#65BCFF"},"children":" json"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({ "}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":"success"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" true"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" config"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" })"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}]]}]}]}],"\n",["$","hr",null,{}],"\n",["$","h2",null,{"id":"best-practices","children":"Best Practices"}],"\n",["$","h3",null,{"id":"1-use-indexes-wisely","children":"1. Use Indexes Wisely"}],"\n",["$","figure",null,{"className":"$undefined","data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1F2028","color":"#c8d3f5"},"tabIndex":"0","data-language":"typescript","data-theme":"moonlight-ii","children":["$","code",null,{"data-language":"typescript","data-theme":"moonlight-ii","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"// ✅ Good - Compound index"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"schema"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"index"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" 1"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" timestamp"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" -"}],["$","span",null,{"style":{"color":"#FF966C"},"children":"1"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" })"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"// ❌ Bad - Too many indexes"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"schema"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"index"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" 1"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" })"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"schema"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"index"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" 1"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" settings"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" 1"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" })"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"schema"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"index"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" shop"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" 1"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" themeExtension"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" 1"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" })"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}]]}]}]}],"\n",["$","h3",null,{"id":"2-ttl-for-temporary-data","children":"2. TTL for Temporary Data"}],"\n",["$","figure",null,{"className":"$undefined","data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1F2028","color":"#c8d3f5"},"tabIndex":"0","data-language":"typescript","data-theme":"moonlight-ii","children":["$","code",null,{"data-language":"typescript","data-theme":"moonlight-ii","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"// Auto delete sau 90 days"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"new"}],["$","span",null,{"style":{"color":"#65BCFF"},"children":" Schema"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  createdAt"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" type"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":" Date"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#4FD6BE"},"children":" expires"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" 7776000"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" }"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"})"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}]]}]}]}],"\n",["$","h3",null,{"id":"3-connection-pooling","children":"3. Connection Pooling"}],"\n",["$","figure",null,{"className":"$undefined","data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1F2028","color":"#c8d3f5"},"tabIndex":"0","data-language":"typescript","data-theme":"moonlight-ii","children":["$","code",null,{"data-language":"typescript","data-theme":"moonlight-ii","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFC777"},"children":"mongoose"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"connect"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"uri"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  maxPoolSize"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" 10"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  minPoolSize"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" 5"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#4FD6BE"},"children":"  socketTimeoutMS"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":":"}],["$","span",null,{"style":{"color":"#FF966C"},"children":" 45000"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"})"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}]]}]}]}],"\n",["$","h3",null,{"id":"4-error-handling","children":"4. Error Handling"}],"\n",["$","figure",null,{"className":"$undefined","data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#1F2028","color":"#c8d3f5"},"tabIndex":"0","data-language":"typescript","data-theme":"moonlight-ii","children":["$","code",null,{"data-language":"typescript","data-theme":"moonlight-ii","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"try"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#C099FF"},"children":"  const"}],["$","span",null,{"style":{"color":"#FF98A4"},"children":" config"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" ="}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" await"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" configRepository"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#65BCFF"},"children":"findByShop"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":"("}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"shop"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" catch"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" ("}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"error"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":")"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#86E1FC"},"children":"  if"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" ("}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"error"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" instanceof"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" mongoose"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#FFC777"},"children":"Error"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#FFC777"},"children":"ValidationError"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"    // Handle validation errors"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  } "}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"else"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" if"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" ("}],["$","span",null,{"style":{"color":"#C8D3F5"},"children":"error"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":" instanceof"}],["$","span",null,{"style":{"color":"#FFC777"},"children":" mongoose"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#FFC777"},"children":"Error"}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"."}],["$","span",null,{"style":{"color":"#FFC777"},"children":"CastError"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":") {"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"    // Handle type errors"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  } "}],["$","span",null,{"style":{"color":"#86E1FC"},"children":"else"}],["$","span",null,{"style":{"color":"#B4C2F0"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#858AA6"},"children":"    // Handle other errors"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"  }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B4C2F0"},"children":"}"}]}]]}]}]}],"\n",["$","hr",null,{}],"\n",["$","h2",null,{"id":"key-takeaways","children":"Key Takeaways"}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"Per-shop isolation"}]," - Mỗi shop có document riêng"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Repository pattern"}]," - Tách biệt data access"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Indexes"}]," - Optimize query performance"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"TTL"}]," - Auto cleanup temporary data"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Validation"}]," - Mongoose + Zod combo"]}],"\n"]}],"\n",["$","hr",null,{}],"\n",["$","h2",null,{"id":"next-steps","children":"Next Steps"}],"\n",["$","p",null,{"children":["Trong ",["$","strong",null,{"children":"Phần 7"}],", bạn sẽ học:"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"Shopify GraphQL API"}],"\n",["$","li",null,{"children":"Querying products, orders"}],"\n",["$","li",null,{"children":"Mutations"}],"\n",["$","li",null,{"children":"Rate limiting"}],"\n"]}],"\n",["$","p",null,{"children":["$","a",null,{"href":"/blog/shopify-api-integration","children":"Đọc Phần 7: Shopify API Integration →"}]}],"\n",["$","p",null,{"children":["$","a",null,{"href":"/blog/xay-dung-admin-ui-remix-polaris","children":"← Quay lại Phần 5: Admin UI"}]}]]],null],null]},["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","shopify-app-database-mongodb","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},[["$","div",null,{"className":"","children":[["$","$L4",null,{"href":"/","className":"text-blue-500 hover:text-blue-700","children":" Back to home"}],["$","article",null,{"className":"mt-4","children":["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]}]]}],null],null]},[["$","html",null,{"lang":"en","children":[["$","head",null,{"children":["$","link",null,{"rel":"stylesheet","href":"https://cdn.jsdelivr.net/npm/water.css@2/out/dark.css"}]}],["$","body",null,{"className":"antialiased max-w-screen-md mx-auto py-0 px-4 md:py-16","children":["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":null}]}]]}],null],null],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/5dfb718f68a2caf5.css","precedence":"next","crossOrigin":"$undefined"}]],"$L5"]]]]
5:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Database Design với MongoDB cho Shopify App - Hướng dẫn chi tiết"}],["$","meta","3",{"name":"description","content":"Hướng dẫn thiết kế database, implement Repository Pattern và sử dụng Mongoose cho Shopify App."}]]
1:null
